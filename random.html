<html>

<head>
    <title>SocialAccounts</title>
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/paper-kit.css?v=2.1.0" rel="stylesheet" />

    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="./assets/css/demo.css" rel="stylesheet" />
    <script src="./assets/js/jquery-3.2.1.js" type="text/javascript"></script>
    <script src="./assets/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="data.js" type="text/javascript"></script>
</head>

<body>

    <form>
            socialHandle :<input type="text" name="socialHandle" class="form-control col-md-3 socialHandle"/>
            name :<input type="text" name="name" class="form-control col-md-3 name"/>
            photoUrl :<input type="text" name="photoUrl" class="form-control col-md-3 photoUrl"/>
            profession :<input type="text" name="profession" class="form-control col-md-3 profession"/>
            socialWorth :<input type="text" name="socialWorth" class="form-control col-md-3 socialWorth"/>
            <br>
            <table id="socailAccounts">
        </table>
    </form>
    <button type="button" class="btn btn-primary" onclick="append_more()">Add +</button>
    <button type="button" class="btn btn-primary" onclick="submit_form()">Submit</button>
    <script>
        $('.socialHandle').val(data.socialHandle);
        $('.name').val(data.name);
        $('.photoUrl').val(data.photoUrl);
        $('.profession').val(data.profession);
        $('.socialWorth').val(data.socialWorth);
        temp = "<tr>";
        for (prop in data.socialAccounts[0]) {
            temp += "<th>" + prop + "</th>";
        }
        temp += "/<tr>";
        $('#socailAccounts').append(temp);
        temp = "";
        for (arr of data.socialAccounts) {
            temp += "<tr>";
            for (prop in arr) {
                temp += "<td><input type='text' class='form-control " + prop + "' value='" + arr[prop] + "' name='" + prop + "'/></td>";
            }
            temp += "</tr>";
        }
        $('#socailAccounts').append(temp);

        function append_more() {
            temp = "<tr>";
            for (prop in data.socialAccounts[0]) {
                temp += "<td><input type='text' class='form-control "+prop+"' name='" + prop + "' /></td>";
            }
            temp += "/<tr>";
            $('#socailAccounts').append(temp);
        }

        function submit_form() {
            prop_arr = [];
            obj_arr = [];
            myobj = new Object();
            myobj.socialHandle = $('.socialHandle').val();
            myobj.name = $('.name').val();
            myobj.photoUrl = $('.photoUrl').val();
            myobj.profession = $('.profession').val();
            myobj.socialWorth = $('.socialWorth').val();
            obj_arr.push(myobj);
            for (prop in data.socialAccounts[0]) {
                prop_arr.push(prop);
            }
            l = ($('.'+prop_arr[0])).length;
            for(i=0;i<l;i++){
                myobj = new Object();
                for(p of prop_arr){
                    myobj[p] = $($('.'+p)[i]).val();
                }
                obj_arr.push(myobj);
            }
            console.log(obj_arr);
        }
    </script>
</body>

</html>